(self.webpackChunke_commerce=self.webpackChunke_commerce||[]).push([[6158],{6158:(t,o,e)=>{"use strict";e.r(o),e.d(o,{LoginPageModule:()=>h});var n=e(8583),i=e(665),r=e(7823),s=e(1348),a=e(4762),g=e(8720),l=e(7556),c=e(8070);const d=[{path:"",component:(()=>{class t{constructor(t,o,e,n,i){this.auth=t,this.loading=o,this.router=e,this.platform=n,this.storage=i,this.email="",this.password="",this.isErrorMail=!0}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){let t;t=this.platform.is("desktop")?localStorage.getItem("token"):yield this.storage.getItem("token"),console.log(t),null!=t&&this.router.navigate(["/home"])})}checkEmail(){const t=new RegExp(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g);this.isErrorMail=!t.test(this.email.trim())}loginForm(){return(0,a.mG)(this,void 0,void 0,function*(){const t=yield this.loading.create({message:"Please wait..."});yield t.present(),this.auth.login(this.email,this.password).then(t=>(0,a.mG)(this,void 0,void 0,function*(){console.log(this.platform.platforms()),this.platform.is("desktop")?(localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user))):(yield this.storage.setItem("token",t.token),yield this.storage.setItem("user",JSON.stringify(t.user))),yield this.loading.dismiss(),this.router.navigate(["/home/"])})).catch(()=>(0,a.mG)(this,void 0,void 0,function*(){this.email="",this.password="",this.isErrorMail=!0,yield this.loading.dismiss()}))})}}return t.\u0275fac=function(o){return new(o||t)(g.Y36(l.e),g.Y36(r.HT),g.Y36(s.F0),g.Y36(r.t4),g.Y36(c.k))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-login"]],decls:28,vars:5,consts:[["slot","start"],["icon","chevron-back-outline"],[1,"logo"],["size","12",1,"ion-align-self-center"],["src","assets/img/cdis.png","alt",""],[1,"form"],["size","12",1,"text"],["size","12"],[3,"ngClass"],["position","floating"],["type","email",3,"ngModel","keydown","ngModelChange"],["type","password",3,"ngModel","ngModelChange"],["expand","block",1,"logBtn",3,"disabled","click"],["routerLink","/register"]],template:function(t,o){1&t&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",0),g._UZ(3,"ion-back-button",1),g.qZA(),g.qZA(),g.qZA(),g.TgZ(4,"ion-content"),g.TgZ(5,"ion-row",2),g.TgZ(6,"ion-col",3),g._UZ(7,"img",4),g.qZA(),g.qZA(),g.TgZ(8,"ion-row",5),g.TgZ(9,"ion-col",6),g.TgZ(10,"h4"),g._uU(11,"Identifiez-vous"),g.qZA(),g.qZA(),g.TgZ(12,"ion-col",7),g.TgZ(13,"ion-item",8),g.TgZ(14,"ion-label",9),g._uU(15,"Adresse Email"),g.qZA(),g.TgZ(16,"ion-input",10),g.NdJ("keydown",function(){return o.checkEmail()})("ngModelChange",function(t){return o.email=t}),g.qZA(),g.qZA(),g.TgZ(17,"ion-item",8),g.TgZ(18,"ion-label",9),g._uU(19,"Mot de passe"),g.qZA(),g.TgZ(20,"ion-input",11),g.NdJ("ngModelChange",function(t){return o.password=t}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(21,"ion-col"),g.TgZ(22,"ion-button",12),g.NdJ("click",function(){return o.loginForm()}),g._uU(23,"Connexion"),g.qZA(),g.qZA(),g.TgZ(24,"ion-col",7),g.TgZ(25,"p"),g.TgZ(26,"a",13),g._uU(27,"Cr\xe9er un compte"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(13),g.Q6J("ngClass",o.isErrorMail?"errorEmail":"goodEmail"),g.xp6(3),g.Q6J("ngModel",o.email),g.xp6(1),g.Q6J("ngClass",o.password.trim().length<4?"errorEmail":"goodEmail"),g.xp6(3),g.Q6J("ngModel",o.password),g.xp6(2),g.Q6J("disabled",o.isErrorMail||o.password.trim().length<4))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.W2,r.Nd,r.wI,r.Ie,n.mk,r.Q$,r.pK,r.j9,i.JJ,i.On,r.YG,s.yS,r.YI],styles:[".logo[_ngcontent-%COMP%]{height:35%}.form[_ngcontent-%COMP%]   .logBtn[_ngcontent-%COMP%]{--background:linear-gradient(to right top,#86a639,#7db336,#6ec135,#56cf3a,#1cdd43);--background-hover:linear-gradient(to right top,#86a639,#7db336,#6ec135,#56cf3a,#1cdd43);--background-focused:linear-gradient(to right top,#86a639,#7db336,#6ec135,#56cf3a,#1cdd43);--background-activated:linear-gradient(to right top,#86a639,#7db336,#6ec135,#56cf3a,#1cdd43)}.form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{padding:0 2%}.form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center}.form[_ngcontent-%COMP%]   .errorEmail[_ngcontent-%COMP%]{border-bottom:red;--border-color:red;--highlight-background:red}.form[_ngcontent-%COMP%]   .goodEmail[_ngcontent-%COMP%]{border-bottom:#64fa00;--border-color:#64fa00;--highlight-background:#64fa00}a[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{text-align:center;color:#2bb04a}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[s.Bz.forChild(d)],s.Bz]}),t})(),h=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[n.ez,i.u5,r.Pc,m]]}),t})()}}]);